# Unix I/O

> 常见 Unix I/O

* ***打开文件***

    应用程序通过要求内核来来打开响应文件，借此访问 I/O 设备，内核返回一个非负整数，也就是文件描述符。后续对文件的所有操作都基于这个文件标识，对于应用程序来说，只需要这个 **fd** 就可以。

* ***改变文件打开位置***

    对于一个打开的文件，内核记录一个位置值 **k**（从文件开头起始的字节偏移量），期初是 0。

* ***读写文件***

    读，意味着从文件位置 k 开始复制 n 个字节到内存。如果 k 大于等于文件大小 m 时，执行读会触发 EOF 条件，应用程序可以检测到 EOF （注意：文件结尾是不存在“EOF”符号的）。

    写，就是从内存复制 n 个字节到一个文件，从文件位置 k 开始，最后更新 k 值。

* ***关闭文件***

    应用程序访问完文件后，通知内核关闭文件，内核的响应是释放打开文件时创建的数据结构，并将 fd 恢复到可用的 fd 池子中。